(()=>{"use strict";const e=()=>document.documentElement.classList.remove("scroll-blocked"),t="preloader";gsap.defaults({duration:0,ease:"power1.inOut"}),(()=>{const o="true"===sessionStorage.getItem(t),n=document.querySelector(".preloader"),r=n.querySelector(".preloader__line"),a=r.querySelector(".preloader__line__runner"),c=n.querySelector(".preloader__button"),i=document.querySelector(".hero"),s=document.querySelector(".menu__content"),l=document.querySelector(".cursor"),d=i.querySelector(".heading"),u=i.querySelector(".hero__caption > *"),p=i.querySelectorAll(".weights > *");let y=0;window.setPreloaderState=h;const m=i.querySelector(".hero__video--first video"),g=i.querySelector(".hero__video--second video");return m&&g?(o?g.play().then((()=>{m.remove(),h(100).add((()=>{f(),q(),e()}))})).catch((()=>{S()})):S(),h):f();function h(e){return y+=e,y>100&&(y=100),gsap.timeline().to(a,{transform:`scaleX(${y/100})`,duration:.4})}function S(){gsap.to(l,{display:"none"}),gsap.to(s,{transform:"translateY(-100%)"}),gsap.to(u,{opacity:0}),gsap.to(p,{opacity:0}),2===m.networkState&&2===g.networkState?w().then((()=>async function(){new Promise((e=>{m.play().then((()=>{m.pause(),e(!0)})).catch((()=>e(!1)))})).then((e=>{e?_():(c.addEventListener("click",(()=>{c.firstElementChild.textContent="Wait a sec...",_()}),{once:!0}),v())}))}())):h(100).add((()=>{c.addEventListener("click",(()=>{c.firstElementChild.textContent="Wait a sec...",w().then((()=>_())),m.load(),g.load()}),{once:!0})})).add(v())}async function _(){setTimeout((()=>{f(),m.play(),m.addEventListener("ended",(()=>{g.play(),m.remove(),q(),e()}))}),500)}function f(){gsap.to(n,{opacity:0,duration:.4,onComplete:()=>{n.remove(),sessionStorage.setItem(t,!0)}})}function v(){return gsap.timeline().to(r,{opacity:0,duration:.5}).to(r,{display:"none"}).to(c,{opacity:0,display:"block"}).to(c,{opacity:1,duration:.5})}function q(){d.appear(),gsap.to(l,{display:"block"}),gsap.to(s,{transform:"translateY(0%)",duration:.7}),gsap.to(u,{opacity:1,duration:.7}),gsap.to(p,{opacity:1,duration:.7})}async function w(){const e=new Promise((e=>{m.addEventListener("canplaythrough",(()=>{h(40),e()}),{once:!0})})),t=new Promise((e=>{g.addEventListener("canplay",(()=>{h(40),e()}),{once:!0})}));return m.load(),g.load(),Promise.all([e,t])}})()})();