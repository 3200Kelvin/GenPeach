(()=>{"use strict";const e=()=>{document.documentElement.classList.remove("scroll-blocked"),document.documentElement.classList.remove("scroll-blocked--reset")},t="preloader";gsap.defaults({duration:0,ease:"power1.inOut"}),((o=!1)=>{const n="true"===sessionStorage.getItem(t),r=document.querySelector(".preloader"),a=r.querySelector(".preloader__line"),c=a.querySelector(".preloader__line__runner"),i=r.querySelector(".preloader__button"),s=document.querySelector(".hero"),l=document.querySelector(".menu__content"),d=document.querySelector(".cursor"),u=s.querySelector(".heading"),p=s.querySelector(".hero__caption > *"),y=s.querySelectorAll(".weights > *");let m=0;window.setPreloaderState=h;const f=s.querySelector(".hero__video--first video"),g=s.querySelector(".hero__video--second video");if(!f||!g)return v();if(!o)return f&&g?(n?g.play().then((()=>{f.remove(),h(100).add((()=>{v(),w(),e()}))})).catch((()=>{S()})):S(),h):v();function h(e){return m+=e,m>100&&(m=100),gsap.timeline().to(c,{transform:`scaleX(${m/100})`,duration:.4})}function S(){gsap.to(d,{display:"none"}),gsap.to(l,{transform:"translateY(-150%)"}),gsap.to(p,{opacity:0}),gsap.to(y,{opacity:0}),2===f.networkState&&2===g.networkState?E().then((()=>async function(){new Promise((e=>{f.play().then((()=>{f.pause(),e(!0)})).catch((()=>e(!1)))})).then((e=>{e?_():(i.addEventListener("click",(()=>{i.firstElementChild.textContent="Wait a sec...",_()}),{once:!0}),q())}))}())):h(100).add((()=>{i.addEventListener("click",(()=>{i.firstElementChild.textContent="Wait a sec...",E().then((()=>_())),k()}),{once:!0})})).add(q())}async function _(){setTimeout((()=>{v(),f.play(),f.addEventListener("ended",(()=>{g.play(),f.remove(),w(),e()}))}),1e3)}function v(){gsap.to(r,{opacity:0,duration:.4,onComplete:()=>{r.remove(),sessionStorage.setItem(t,!0)}})}function q(){return gsap.timeline().to(a,{opacity:0,duration:.5}).to(a,{display:"none"}).to(i,{opacity:0,display:"block"}).to(i,{opacity:1,duration:.5})}function w(){u.appear(),gsap.to(d,{display:"block"}),gsap.to(l,{transform:"translateY(0%)",duration:.7}),gsap.to(p,{opacity:1,duration:.7}),gsap.to(y,{opacity:1,duration:.7})}async function E(){const e=new Promise((e=>{f.addEventListener("canplaythrough",(()=>{h(40),e()}),{once:!0})})),t=new Promise((e=>{g.addEventListener("canplay",(()=>{h(40),e()}),{once:!0})}));return k(),Promise.all([e,t])}function k(){f.load(),g.load()}h(100).add((()=>{v(),w(),e()}))})()})();